---
image: fedora/latest
sources:
  - https://codeberg.org/gotmax23/goorphans
repositories:
  copr:copr.fedorainfracloud.org:gotmax23:golangci-lint: "https://copr.fedorainfracloud.org/coprs/gotmax23/golangci-lint/repo/fedora-rawhide/gotmax23-golangci-lint-fedora-rawhide.repo"
packages:
  - golang
  - golangci-lint
  - krb5-devel
environment:
  GOPROXY: https://proxy.golang.org,direct
  GOSUMDB: sum.golang.org
tasks:
  - tidy: |
      cd goorphans
      go mod tidy -diff
  - build: |
      cd goorphans
      go build .
  - test: |
      cd goorphans
      go test ./...
  - lint: |
      cd goorphans
      golangci-lint run
