# Orphaned package announcements process

This repository houses work in progress tooling for the orphaned packages
process and for sending mass announcements to Fedora maintainers.

## Orphans data

The orphans.txt and orphans.json files are generated by
[find_unblocked_orphans.py] from the releng scripts repository which is built
into the `quay.io/gotmax23/find_unblocked_orphans` image using [this Dockerfile][Dockerfile].
The [systemd service], [systemd timer], and [wrapper script] used to generate
the data files are located in [my-orphaned_packages_process] in gotmax23's scripts repo.
The script is run on an hourly basis and has basic monitoring using
healthchecks.io to make sure it doesn't stall or go down.
`unblocked_orphans.pre.sh`, `unblocked_orphans.post.sh`, and
`unblocked_orphans.fail.sh` scripts can be added to `$PATH` or the same
directory as the `unblocked_orphans.sh` wrapper script to configure monitoring.

## Retiring

Orphaned packages that have not been picked up after six weeks are retired
using [retire.py] in the releng scripts repository.
The script clones each repository and run
I try to run this script at least once a week.
After I run this script, I manually run `systemctl start --user
find_unblocked_orphans.service` to refresh the data
and wait for the refresh to complete before moving on to the next step.

## Announcements

I send an announcement to the devel-announce list
every other week containing the full orphans.txt file.
Every individual maintainer or member of a packaging SIG that maintains any
affected package is BCCed on the email.
goorphans queries FASJSON for users' (both direct maintaienrs and group
members) email addresses.


[find_unblocked_orphans.py]: https://pagure.io/releng/blob/main/f/scripts_new/packages/orphaned/find_unblocked_orphans.py
[Dockerfile]: https://pagure.io/releng/blob/main/f/scripts_new/packages/orphaned/Dockerfile
[my-orphaned_packages_process]: https://git.sr.ht/~gotmax23/fedora-scripts/tree/main/item/releng/my-orphaned_packages_process
[systemd service]: https://git.sr.ht/~gotmax23/fedora-scripts/tree/main/item/releng/my-orphaned_packages_process/find_unblocked_orphans.service
[systemd timer]: https://git.sr.ht/~gotmax23/fedora-scripts/tree/main/item/releng/my-orphaned_packages_process/find_unblocked_orphans.timer
[wrapper script]: https://git.sr.ht/~gotmax23/fedora-scripts/tree/main/item/releng/my-orphaned_packages_process/unblocked_orphans.sh
[retire.py]: https://pagure.io/releng/blob/main/f/scripts_new/packages/orphaned/retire.py
